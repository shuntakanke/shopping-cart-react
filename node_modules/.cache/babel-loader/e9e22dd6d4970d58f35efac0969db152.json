{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shunta/Desktop/portfolio/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shunta/Desktop/portfolio/react-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{FETCH_PRODUCTS}from\"../types\";import{FILTER_PRODUCTS_BY_SIZE,ORDER_PRODUCTS_BY_PRICE}from\"../types\";export var fetchProducts=function fetchProducts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/products\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;console.log(data);dispatch({type:FETCH_PRODUCTS,payload:data});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var filterProducts=function filterProducts(products,size){return function(dispatch){dispatch({type:FILTER_PRODUCTS_BY_SIZE,payload:{size:size,items:size===\"\"?products:products.filter(function(x){return x.availableSizes.indexOf(size)>=0;})}});};};export var sortProducts=function sortProducts(filteredProducts,sort){return function(dispatch){var sortedProducts=filteredProducts.slice();if(sort===\"latest\"){sortedProducts.sort(function(a,b){return a._id>b._id?1:-1;});}else{sortedProducts.sort(function(a,b){return sort===\"lowest\"?a.price>b.price?1:-1:a.price>b.price?-1:1;});}console.log(sortedProducts);dispatch({type:ORDER_PRODUCTS_BY_PRICE,payload:{sort:sort,items:sortedProducts}});};};","map":{"version":3,"sources":["/Users/shunta/Desktop/portfolio/react-shopping-cart/src/actions/productActions.js"],"names":["FETCH_PRODUCTS","FILTER_PRODUCTS_BY_SIZE","ORDER_PRODUCTS_BY_PRICE","fetchProducts","dispatch","fetch","res","json","data","console","log","type","payload","filterProducts","products","size","items","filter","x","availableSizes","indexOf","sortProducts","filteredProducts","sort","sortedProducts","slice","a","b","_id","price"],"mappings":"iVAAA,OAASA,cAAT,KAA+B,UAA/B,CACA,OAASC,uBAAT,CAAkCC,uBAAlC,KAAiE,UAAjE,CACA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,kGAAM,iBAAOC,QAAP,qJACfC,CAAAA,KAAK,CAAC,eAAD,CADU,QAC3BC,GAD2B,qCAEdA,CAAAA,GAAG,CAACC,IAAJ,EAFc,QAE3BC,IAF2B,eAGjCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAJ,QAAQ,CAAC,CACPO,IAAI,CAAEX,cADC,CAEPY,OAAO,CAAEJ,IAFF,CAAD,CAAR,CAJiC,sDAAN,gEAAtB,CAUP,MAAO,IAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,QAAD,CAAWC,IAAX,QAAoB,UAACX,QAAD,CAAc,CAC9DA,QAAQ,CAAC,CACPO,IAAI,CAAEV,uBADC,CAEPW,OAAO,CAAE,CACPG,IAAI,CAAEA,IADC,CAEPC,KAAK,CACHD,IAAI,GAAK,EAAT,CACID,QADJ,CAEIA,QAAQ,CAACG,MAAT,CAAgB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,cAAF,CAAiBC,OAAjB,CAAyBL,IAAzB,GAAkC,CAAzC,EAAhB,CALC,CAFF,CAAD,CAAR,CAUD,CAX6B,EAAvB,CAYP,MAAO,IAAMM,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,gBAAD,CAAmBC,IAAnB,QAA4B,UAACnB,QAAD,CAAc,CACpE,GAAMoB,CAAAA,cAAc,CAAGF,gBAAgB,CAACG,KAAjB,EAAvB,CACA,GAAIF,IAAI,GAAK,QAAb,CAAuB,CACrBC,cAAc,CAACD,IAAf,CAAoB,SAACG,CAAD,CAAIC,CAAJ,QAAWD,CAAAA,CAAC,CAACE,GAAF,CAAQD,CAAC,CAACC,GAAV,CAAgB,CAAhB,CAAoB,CAAC,CAAhC,EAApB,EACD,CAFD,IAEO,CACLJ,cAAc,CAACD,IAAf,CAAoB,SAACG,CAAD,CAAIC,CAAJ,QAClBJ,CAAAA,IAAI,GAAK,QAAT,CACIG,CAAC,CAACG,KAAF,CAAUF,CAAC,CAACE,KAAZ,CACE,CADF,CAEE,CAAC,CAHP,CAIIH,CAAC,CAACG,KAAF,CAAUF,CAAC,CAACE,KAAZ,CACA,CAAC,CADD,CAEA,CAPc,EAApB,EASD,CACDpB,OAAO,CAACC,GAAR,CAAYc,cAAZ,EACApB,QAAQ,CAAC,CACPO,IAAI,CAAET,uBADC,CAEPU,OAAO,CAAE,CACPW,IAAI,CAAEA,IADC,CAEPP,KAAK,CAAEQ,cAFA,CAFF,CAAD,CAAR,CAOD,CAvB2B,EAArB","sourcesContent":["import { FETCH_PRODUCTS } from \"../types\";\nimport { FILTER_PRODUCTS_BY_SIZE, ORDER_PRODUCTS_BY_PRICE } from \"../types\";\nexport const fetchProducts = () => async (dispatch) => {\n  const res = await fetch(\"/api/products\");\n  const data = await res.json();\n  console.log(data);\n  dispatch({\n    type: FETCH_PRODUCTS,\n    payload: data,\n  });\n};\n\nexport const filterProducts = (products, size) => (dispatch) => {\n  dispatch({\n    type: FILTER_PRODUCTS_BY_SIZE,\n    payload: {\n      size: size,\n      items:\n        size === \"\"\n          ? products\n          : products.filter((x) => x.availableSizes.indexOf(size) >= 0),\n    },\n  });\n};\nexport const sortProducts = (filteredProducts, sort) => (dispatch) => {\n  const sortedProducts = filteredProducts.slice();\n  if (sort === \"latest\") {\n    sortedProducts.sort((a, b) => (a._id > b._id ? 1 : -1));\n  } else {\n    sortedProducts.sort((a, b) =>\n      sort === \"lowest\"\n        ? a.price > b.price\n          ? 1\n          : -1\n        : a.price > b.price\n        ? -1\n        : 1\n    );\n  }\n  console.log(sortedProducts);\n  dispatch({\n    type: ORDER_PRODUCTS_BY_PRICE,\n    payload: {\n      sort: sort,\n      items: sortedProducts,\n    },\n  });\n};\n"]},"metadata":{},"sourceType":"module"}